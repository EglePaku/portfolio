<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <!-- Link Swiper's CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper/swiper-bundle.min.css"
    />

    <!-- Tilt.js CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.css"
    />

    <!-- Core CSS -->
    <link rel="stylesheet" href="scss/style.css" />

    <style>
      /* Additional styling for the scroll-to button */
      #scrollToSlideThree {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 1000; /* Ensure it's above other elements */
      }
    </style>
  </head>
  <body>
<div class="wrapper">
      <!-- /////////// Menu ///////////// -->
      <div id="menu" class="">
        <!-- Bento One -->
        <div class="bento one">
          <div class="bentoInner" data-tilt data-tilt-max="10">
            <a href="#">
              <img src="assets/icon-tiktok.svg" alt="" />
            </a>
            <a href="#">
              <img src="assets/icon-instagram.svg" alt="" />
            </a>
            <a href="#">
              <img src="assets/icon-facebook.svg" alt="" />
            </a>
          </div>
        </div>
        <!-- Another link -->
        <div class="link" data-tilt data-tilt-max="30"></div>
      </div>
      <div id="menuButton">Toggle Menu Position</div>
  
      <!-- Scroll-to button -->
      <button id="scrollToSlideThree">Scroll to Slide Three</button>
  
      <!-- /////////// Swiper ////////// -->
      <div class="swiper mySwiper">
        <div class="swiper-wrapper">
          <!-- Slide -->
          <div class="swiper-slide">
            <div class="swiperSlideWrap heroSlide swiper-zoom-container">
              <!-- Bento One -->
              <div
                class="bento one hide-mobile animated"
                data-animation="flipInX" data-tilt data-tilt-max="10">
                <div class="bentoInner">
                  <a href="#">
                    <img src="assets/icon-tiktok.svg" alt="" />
                  </a>
                  <a href="#">
                    <img src="assets/icon-instagram.svg" alt="" />
                  </a>
                  <a href="#">
                    <img src="assets/icon-facebook.svg" alt="" />
                  </a>
                </div>
              </div>
  
              <!-- Bento Two -->
              <div class="bento two">
                <div class="bentoInner">
                  <h1>Front-End Maestro of user happiness</h1>
                  <p>Check out my gallery of my latest and greatest UX/UX solutions</p>
                </div>
              </div>
  
              <div class="bento three" data-tilt data-tilt-max="10">
                <div class="bentoInner">Bento Three</div>
              </div>
              <div class="bento four" data-tilt data-tilt-max="10">
                <div class="bentoInner">Bento Four</div>
              </div>
            </div>
          </div>
          <!-- slide -->
          <div class="swiper-slide" id="slideThree">
            <div class="swiperSlideWrap typeTwo">
              <div class="bento">
                <div class="bentoInner">Slide 2</div>
              </div>
            </div>
          </div>
          <!-- Slide -->
          <div class="swiper-slide">
            <div class="swiperSlideWrap typeTwo">
              <div class="bento slideThree">
                <div class="bentoInner">Slide 3</div>
              </div>
            </div>
          </div>
          <!-- Slide -->
          <div class="swiper-slide animated" data-animation="fadeInUp">
            <div class="swiperSlideWrap typeTwo">
              <div class="bento slideThree">
                <div class="bentoInner">Slide 4</div>
              </div>
            </div>
          </div>
          <!-- Slide -->
          <div class="swiper-slide">
            <div class="swiperSlideWrap typeTwo">
              <div class="bento slideThree">
                <div class="bentoInner">Slide 5</div>
              </div>
            </div>
          </div>
        </div>
        <!-- End Swiper Wrapper -->
        <!-- <div class="swiper-pagination"></div> -->
      </div>
</div>

    <!-- ////////// Scipts ////////// -->

    <!-- Swiper JS -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <!-- Tilt.js JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js"></script>

    <script>
      // Initialize Swiper
      var swiper = new Swiper(".mySwiper", {
        slidesPerView: "auto",
        freeMode: true,
        // centeredSlides: true,
        mousewheel: {
          // forceToAxis: true,
          // Ensure scrolling is only horizontal
          sensitivity: 1, // Adjust sensitivity as needed
        },
        //   pagination: {
        //     el: ".swiper-pagination",
        //     clickable: true,
        //   },
        zoom: {
          maxRatio: 5,
        },
        // Event listener for slide change
        on: {
          slideChange: function () {
            //   var slideIndex = swiper.realIndex;
            var slide = swiper.slides[slideIndex];
            var slideWidthWithMargins =
              slide.offsetWidth + 0.4 * window.innerWidth;
            var slideCenter = slide.offsetLeft + slideWidthWithMargins * 4;
            swiper.setTranslate(-slideCenter);
          },
        },
      });

      // Button click event handler to toggle menu position
      var menuButton = document.getElementById("menuButton");
      var menu = document.getElementById("menu");
      var isMenuOpen = false;

      menuButton.addEventListener("click", function () {
        if (!isMenuOpen) {
          menu.style.left = "0";
        } else {
          menu.style.left = "-100px";
        }
        isMenuOpen = !isMenuOpen; // Toggle menu state
      });

      // ------------------

      document
        .getElementById("scrollToSlideThree")
        .addEventListener("click", function () {
          var swiper = new Swiper(".mySwiper"); // Initialize Swiper

          // Get the desired slide element
          var slideThree = document.getElementById("slideThree");

          // Get the index of the desired slide
          var slideIndex = swiper.slides.indexOf(slideThree);

          // Get the position of the desired slide
          var slideOffset = slideThree.offsetLeft;

          // Calculate the offset for scrolling 15vw to the right
          var scrollToOffset = slideOffset - 0.1 * window.innerWidth;

          // Scroll to the desired position with animation
          swiper.slideTo(slideIndex, 500, false); // Adjust the duration as needed for smoothness
          swiper.setTranslate(-scrollToOffset); // Set the translate value to move the slide to the desired position
        });

      // -----------------------

      // Variable to track if the user has scrolled back to the very beginning
      var isAtBeginning = true;

      // Toggle menu visibility and position on mousewheel
      document.addEventListener("wheel", function (event) {
        if (window.innerWidth > 1200) {
          var currentScrollLeft = event.deltaY > 0 ? 0 : -100; // Adjust the value as needed
          var menu = document.getElementById("menu");
          menu.style.left = currentScrollLeft + "px";

          // Check if the user has scrolled back to the very beginning (heroSlide)
          if (swiper.translate <= -(window.innerWidth * 0.4)) {
            // Adjusted condition to start 70vw before the actual beginning
            isAtBeginning = true;
          } else {
            isAtBeginning = false;
          }

          // Show menu if at the beginning or if scrolled past the beginning
          if (isAtBeginning) {
            menu.style.left = "0";
          } else {
            menu.style.left = "-100px";
          }
        }
      });

      // Adjust menu position on window resize
      window.addEventListener("resize", function () {
        var menu = document.getElementById("menu");
        if (window.innerWidth <= 1200 && menu.offsetLeft === 0) {
          menu.style.left = "-100px";
        }
      });
    </script>

    <!-- ----------------------- -->

    <script>
      // Function to handle intersection
      function handleIntersection(entries, observer) {
        entries.forEach((entry) => {
          if (entry.intersectionRatio > 0) {
            // If element is in viewport
            entry.target.classList.add("visible"); // Add class to make it visible
            if (entry.target.dataset.animation === "flipInX") {
              entry.target.classList.add("flipInX"); // Add flipInX animation class
            } else if (entry.target.dataset.animation === "fadeInUp") {
              entry.target.classList.add("fadeInUp"); // Add fadeInUp animation class
            }
            observer.unobserve(entry.target); // Stop observing once animation triggered
          }
        });
      }

      // Options for the observer (which entries should be observed)
      const options = {
        root: null, // Use the viewport as the root
        rootMargin: "0px", // No margin
        threshold: 0.5, // When half of the element is in the viewport
      };

      // Create the observer
      const observer = new IntersectionObserver(handleIntersection, options);

      // Select elements to be observed
      const animatedElements = document.querySelectorAll(".animated");

      // Start observing each animated element
      animatedElements.forEach((element) => {
        observer.observe(element);
      });
    </script>
  </body>
</html>
